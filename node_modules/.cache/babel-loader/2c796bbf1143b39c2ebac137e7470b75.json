{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\billy\\\\Desktop\\\\isomorphic\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"C:\\\\Users\\\\billy\\\\Desktop\\\\isomorphic\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\billy\\\\Desktop\\\\isomorphic\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\billy\\\\Desktop\\\\isomorphic\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\billy\\\\Desktop\\\\isomorphic\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\billy\\\\Desktop\\\\isomorphic\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\billy\\\\Desktop\\\\isomorphic\\\\isomorphic\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\billy\\\\Desktop\\\\isomorphic\\\\isomorphic\\\\src\\\\containers\\\\Box\\\\GridLayout.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport { ReactElementResize } from 'react-element-resize';\nimport { Icon } from 'antd';\nimport boxActions from '../../redux/box/actions';\nimport { layoutConfig, gutter } from './config';\nimport { generateLayoutfunc, indexOfBoxfunc } from './helperfunc.js';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport './box.css';\nvar deleteBox = boxActions.deleteBox,\n    saveBox = boxActions.saveBox;\nvar ResponsiveReactGridLayout = WidthProvider(Responsive);\n\nvar GridLayout = /*#__PURE__*/function (_Component) {\n  _inherits(GridLayout, _Component);\n\n  function GridLayout(props) {\n    var _this;\n\n    _classCallCheck(this, GridLayout);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GridLayout).call(this, props));\n    _this.onLayoutChange = _this.onLayoutChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.breakPointChange = _this.breakPointChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.autoHeight = _this.autoHeight.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      breakpoint: 'lg'\n    };\n    return _this;\n  }\n\n  _createClass(GridLayout, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        allBox: this.props.allBox\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.reload) {\n        this.setState({\n          allBox: nextProps.allBox\n        });\n      }\n    }\n  }, {\n    key: \"onLayoutChange\",\n    value: function onLayoutChange(layouts) {\n      var _this2 = this;\n\n      var allBox = this.state.allBox;\n      layouts.forEach(function (layout) {\n        var boxIndex = indexOfBoxfunc(allBox, layout.i);\n\n        if (boxIndex !== -1) {\n          var x = layout.x,\n              y = layout.y,\n              h = layout.h,\n              w = layout.w,\n              i = layout.i;\n          allBox[boxIndex].size[_this2.state.breakpoint] = {\n            x: x,\n            y: y,\n            h: h,\n            w: w,\n            i: i\n          };\n        }\n      });\n      this.setState({\n        allBox: allBox\n      });\n      this.props.saveBox(allBox);\n    }\n  }, {\n    key: \"breakPointChange\",\n    value: function breakPointChange(newBreakpoint) {\n      // this.breakpoint = newBreakpoint;\n      this.setState({\n        breakpoint: newBreakpoint\n      }); // Device type can be accesssed from this.breakpoint variable\n    }\n  }, {\n    key: \"autoHeight\",\n    value: function autoHeight(uid, _ref) {\n      var height = _ref.height;\n      var _this$state = this.state,\n          allBox = _this$state.allBox,\n          breakpoint = _this$state.breakpoint;\n      var self = this;\n\n      if (height === 0) {\n        return;\n      }\n\n      allBox.map(function (singleBox) {\n        var indexOfBox = indexOfBoxfunc(allBox, uid);\n\n        if (allBox[indexOfBox].size[breakpoint].h !== Math.ceil(height / layoutConfig.rowHeight)) {\n          allBox[indexOfBox].size[breakpoint].h = Math.ceil(height / layoutConfig.rowHeight);\n        }\n\n        return null;\n      });\n      setTimeout(function () {\n        self.setState({\n          allBox: allBox\n        });\n      }, 1);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var allBox = this.state.allBox;\n      var deleteBox = this.props.deleteBox;\n      var Layouts = generateLayoutfunc(allBox);\n\n      var renderBox = function renderBox(singleBox) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"isomorphicSingleCardHolder\",\n          key: singleBox.i,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(ReactElementResize, {\n          debounceTimeout: 200,\n          onResize: function onResize(data) {\n            _this3.autoHeight(singleBox.i, data);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 11\n          }\n        }, function (data) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"isomorphicSingleCard\",\n            style: {\n              paddingRight: \"\".concat(Math.ceil(gutter.gutterWidth), \"px\"),\n              paddingBottom: \"\".concat(Math.ceil(gutter.gutterHeight), \"px\")\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"isoCardBox\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"isoCardBoxHeader\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(\"h3\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 21\n            }\n          }, singleBox.title), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"isoCardControl\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 21\n            }\n          }, /*#__PURE__*/React.createElement(\"button\", {\n            className: \"isoDeleteBtn\",\n            onClick: function onClick() {\n              return deleteBox(singleBox.i);\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 23\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            type: \"delete\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 25\n            }\n          })), /*#__PURE__*/React.createElement(\"button\", {\n            className: \"isoDragBox\",\n            type: \"button\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 23\n            }\n          }, /*#__PURE__*/React.createElement(Icon, {\n            type: \"swap\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 25\n            }\n          })))), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"isoCardBoxBody\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(\"p\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 21\n            }\n          }, singleBox.content), singleBox.reactComponent ? /*#__PURE__*/React.createElement(singleBox.reactComponent, {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 23\n            }\n          }) : null)));\n        }));\n      };\n\n      var boxSettings = _objectSpread({}, layoutConfig, {\n        layouts: Layouts,\n        onDragStop: this.onLayoutChange,\n        onResizeStop: this.onLayoutChange,\n        onBreakpointChange: this.breakPointChange\n      });\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"isoCardBoxContentWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(ResponsiveReactGridLayout, Object.assign({}, boxSettings, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }\n      }), Layouts.md.map(renderBox)));\n    }\n  }]);\n\n  return GridLayout;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    allBox: state.Box.allBox,\n    reload: state.Box.reload\n  };\n}\n\nexport default connect(mapStateToProps, {\n  saveBox: saveBox,\n  deleteBox: deleteBox\n})(GridLayout);","map":{"version":3,"sources":["C:/Users/billy/Desktop/isomorphic/isomorphic/src/containers/Box/GridLayout.js"],"names":["React","Component","connect","Responsive","WidthProvider","ReactElementResize","Icon","boxActions","layoutConfig","gutter","generateLayoutfunc","indexOfBoxfunc","deleteBox","saveBox","ResponsiveReactGridLayout","GridLayout","props","onLayoutChange","bind","breakPointChange","autoHeight","state","breakpoint","setState","allBox","nextProps","reload","layouts","forEach","layout","boxIndex","i","x","y","h","w","size","newBreakpoint","uid","height","self","map","singleBox","indexOfBox","Math","ceil","rowHeight","setTimeout","Layouts","renderBox","data","paddingRight","gutterWidth","paddingBottom","gutterHeight","title","content","reactComponent","boxSettings","onDragStop","onResizeStop","onBreakpointChange","md","mapStateToProps","Box"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport { ReactElementResize } from 'react-element-resize';\nimport { Icon } from 'antd';\nimport boxActions from '../../redux/box/actions';\nimport { layoutConfig, gutter } from './config';\nimport { generateLayoutfunc, indexOfBoxfunc } from './helperfunc.js';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport './box.css';\n\nconst { deleteBox, saveBox } = boxActions;\nconst ResponsiveReactGridLayout = WidthProvider(Responsive);\n\nclass GridLayout extends Component {\n  constructor(props) {\n    super(props);\n    this.onLayoutChange = this.onLayoutChange.bind(this);\n    this.breakPointChange = this.breakPointChange.bind(this);\n    this.autoHeight = this.autoHeight.bind(this);\n    this.state = {\n      breakpoint: 'lg'\n    };\n  }\n  componentWillMount() {\n    this.setState({ allBox: this.props.allBox });\n  }\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.reload) {\n      this.setState({ allBox: nextProps.allBox });\n    }\n  }\n  onLayoutChange(layouts) {\n    const { allBox } = this.state;\n    layouts.forEach(layout => {\n      const boxIndex = indexOfBoxfunc(allBox, layout.i);\n      if (boxIndex !== -1) {\n        const { x, y, h, w, i } = layout;\n        allBox[boxIndex].size[this.state.breakpoint] = { x, y, h, w, i };\n      }\n    });\n    this.setState({ allBox });\n    this.props.saveBox(allBox);\n  }\n  breakPointChange(newBreakpoint) {\n    // this.breakpoint = newBreakpoint;\n    this.setState({ breakpoint: newBreakpoint });\n    // Device type can be accesssed from this.breakpoint variable\n  }\n  autoHeight(uid, { height }) {\n    const { allBox, breakpoint } = this.state;\n    const self = this;\n    if (height === 0) {\n      return;\n    }\n    allBox.map(singleBox => {\n      const indexOfBox = indexOfBoxfunc(allBox, uid);\n      if (\n        allBox[indexOfBox].size[breakpoint].h !==\n        Math.ceil(height / layoutConfig.rowHeight)\n      ) {\n        allBox[indexOfBox].size[breakpoint].h = Math.ceil(\n          height / layoutConfig.rowHeight\n        );\n      }\n      return null;\n    });\n    setTimeout(() => {\n      self.setState({ allBox });\n    }, 1);\n  }\n  render() {\n    const { allBox } = this.state;\n    const { deleteBox } = this.props;\n    const Layouts = generateLayoutfunc(allBox);\n    const renderBox = singleBox => {\n      return (\n        <div className=\"isomorphicSingleCardHolder\" key={singleBox.i}>\n          <ReactElementResize\n            debounceTimeout={200}\n            onResize={data => {\n              this.autoHeight(singleBox.i, data);\n            }}\n          >\n            {data => (\n              <div\n                className=\"isomorphicSingleCard\"\n                style={{\n                  paddingRight: `${Math.ceil(gutter.gutterWidth)}px`,\n                  paddingBottom: `${Math.ceil(gutter.gutterHeight)}px`\n                }}\n              >\n                <div className=\"isoCardBox\">\n                  <div className=\"isoCardBoxHeader\">\n                    <h3>{singleBox.title}</h3>\n\n                    <div className=\"isoCardControl\">\n                      <button\n                        className=\"isoDeleteBtn\"\n                        onClick={() => deleteBox(singleBox.i)}\n                      >\n                        <Icon type=\"delete\" />\n                      </button>\n                      <button className=\"isoDragBox\" type=\"button\">\n                        <Icon type=\"swap\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"isoCardBoxBody\">\n                    <p>{singleBox.content}</p>\n                    {singleBox.reactComponent ? (\n                      <singleBox.reactComponent />\n                    ) : null}\n                  </div>\n                </div>\n              </div>\n            )}\n          </ReactElementResize>\n        </div>\n      );\n    };\n    const boxSettings = {\n      ...layoutConfig,\n      layouts: Layouts,\n      onDragStop: this.onLayoutChange,\n      onResizeStop: this.onLayoutChange,\n      onBreakpointChange: this.breakPointChange\n    };\n    return (\n      <div className=\"isoCardBoxContentWrapper\">\n        <ResponsiveReactGridLayout {...boxSettings}>\n          {Layouts.md.map(renderBox)}\n        </ResponsiveReactGridLayout>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    allBox: state.Box.allBox,\n    reload: state.Box.reload\n  };\n}\nexport default connect(mapStateToProps, {\n  saveBox,\n  deleteBox\n})(GridLayout);\n"]},"metadata":{},"sourceType":"module"}